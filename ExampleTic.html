

var myfont = createFont("monospace", 34);


var board= [ " "," "," "," "," "," "," "," "," " ];

var Turn="Player 1";

var sqr_width=105;
var sqr_height=105;

var brd_x=30;
var brd_y=10;

var text_offset_x=24;
var text_offset_y=84;


var held_down=false;


var game_mode=0;


var check_win=function()
{

   if(board[0] !==" " && board[0] === board[1] && board[1] === board[2])
    {  return true;   }
   if(board[3] !==" " && board[3] === board[4] && board[4] === board[5])
    {  return true;   }
   if(board[6] !==" " && board[6] === board[7] && board[7] === board[8])
    {  return true;   }

   if(board[0] !==" " && board[0] === board[3] && board[3] === board[6])
    {  return true;   }
   if(board[1] !==" " && board[1] === board[4] && board[4] === board[7])
    {  return true;   }
   if(board[2] !==" " && board[2] === board[5] && board[5] === board[8])
    {  return true;   }

   if(board[0] !==" " && board[0] === board[4] && board[4] === board[8])
    {  return true;   }
   if(board[2] !==" " && board[2] === board[4] && board[4] === board[6])
    {  return true;   }

    return false;
};

var check_tie=function()
{
 for(var i in board)
    {
    if(board[i]===" ")
        {
        return false;
        }
    }
return true;
};

var draw= function()
{
background(107, 185, 209);
textFont(myfont,95);

strokeWeight(2);
fill(227, 227, 227);
rect(16,335,350,60);

fill(201, 219, 255);
strokeWeight(4);
rect(brd_x-12,brd_y-5,brd_x+(sqr_width*3),brd_y+(sqr_height*3));

line(brd_x , brd_y+sqr_height , brd_x+(sqr_width*3) ,  brd_y+sqr_height );

line(brd_x , brd_y+(sqr_height*2) , brd_x+(sqr_width*3) ,  brd_y+(sqr_height*2) );

line(brd_x+sqr_width , brd_y , brd_x+sqr_width , brd_y+(sqr_height*3) );

line(brd_x+(sqr_width*2) , brd_y , brd_x+(sqr_width*2) , brd_y+(sqr_height*3) );

fill(255, 0, 0);
if(mouseIsPressed && !held_down && !game_mode)
    {
    held_down = true;
    if(mouseX > brd_x && mouseX < brd_x+(sqr_width*3) &&  mouseY > brd_y && mouseY < brd_y+(sqr_height*3) )
        {
            var grid_x= floor((mouseX-brd_x)/sqr_width);
            var grid_y= floor((mouseY-brd_y)/sqr_height);

            if(Turn==="Player 1" && board[grid_x+(grid_y*3)]===" ")
                {
                board[grid_x+(grid_y*3)]="X"; //adds the X to board array
                if(check_win())
                    {
                    game_mode=true;
                    }
                else{
                    Turn="Player 2";
                    }
                }
            else if (Turn==="Player 2"  && board[grid_x+(grid_y*3)]===" ")
                {
                board[grid_x+(grid_y*3)]="O";
                if(check_win())
                    {
                    game_mode=true;
                    }
                else{
                    Turn="Player 1";
                    }
                }
        }
    }

if(held_down && !mouseIsPressed)
    {
    held_down = false;
    }


for(var cy=0;cy<3;cy++)
    {
    for(var cx=0;cx<3;cx++)
        {
        if(board[cx+(cy*3)]==="X")
            {
            fill(255, 0, 0);
            }
        else
            {
            fill(0, 0, 255);
            }
        text(board[cx+(cy*3)],brd_x+(text_offset_x)+(cx*sqr_width),brd_y+(text_offset_y)+(cy*sqr_height));
        }
    }

if(game_mode===true)
    {
      textFont(myfont,22);
      fill(255, 0, 0);
      text(Turn+" is the Winner!",36,370);
    }


if(!game_mode && check_tie())
    {
    textFont(myfont,22);
    fill(28, 94, 28);
    text("Tie game....",36,370);
    }

};



